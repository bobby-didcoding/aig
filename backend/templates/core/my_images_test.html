{% load static widget_tweaks %}
<!doctype html>
<html lang="en">
<head>

    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Mobile Specific -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- ================================
        START SEO BLOCKS
    ================================= -->
    <title>{% block title %}{% endblock %}</title>
    {% include 'base/partials/seo.html' %}
    {% block schema %}{% endblock %}
    <!-- ================================
        END START SEO BLOCKS
    ================================= -->

    <!-- ================================
        START CSS BLOCKS
    ================================= -->
    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/vendor/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/vendor/bootstrap-select.min.css' %}" rel="stylesheet" type="text/css">

    <!--Vendor CSS-->
    <link href="{% static 'css/vendor/magnific-popup.css' %}" rel="stylesheet" type="text/css">

    <!--Custom CSS-->
    <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css">
    <!--Toastr CSS-->
    <link rel="stylesheet" href="{% static 'css/vendor/toastr.css' %}" type="text/css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-jcrop/0.9.15/css/jquery.Jcrop.min.css" integrity="sha512-bbAsdySYlqC/kxg7Id5vEUVWy3nOfYKzVHCKDFgiT+GsHG/3MD7ywtJnJNSgw++HBc+w4j71MLiaeVm1XY5KDQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- ================================
        END CSS BLOCKS
    ================================= -->
</head> 

<body>

    <!-- Preloader -->
    <div id="preloader">
		<div class="lds-ripple">
			<div></div>
			<div></div>
		</div>
    </div>
    <!-- Preloader Ends -->

    <div id="main-wrapper">
    <!-- ================================
        START MODAL BLOCKS
    ================================= -->
    {% block modal %}{% endblock %}
    <!-- ================================
        END MODAL BLOCKS
    ================================= -->

    <!-- ================================
        START CONTENT BLOCKS
    ================================= -->
    {% include 'base/partials/nav_header.html' %}
    {% include 'base/partials/header.html' %}
    {% include 'base/partials/sidebar.html' %}
    <div class="content-body">
        <div class="container-fluid">
			{% include 'base/partials/breadcrumb.html' %}
			<div>
				<div class="jcrop-ux-fade-more jcrop-ux-keep-current">
					<div class="jcrop-stage jcrop-image-stage" style="width: 342px; height: 228px;">
						<div tabindex="0" class="jcrop-widget active" style="top: 64px; left: 23px; width: 264px; height: 132px; z-index: 10;">
							<div class="jcrop-handle n">
							</div>
							<div class="jcrop-handle s">
							</div>
							<div class="jcrop-handle e">
							</div>
							<div class="jcrop-handle w">
							</div>
							<div class="jcrop-handle sw">
							</div>
							<div class="jcrop-handle nw">
							</div>
							<div class="jcrop-handle ne">
							</div>
							<div class="jcrop-handle se">

							</div>
						</div>
						<div class="jcrop-shade t" style="background-color: black; opacity: 0.5; height: 63.84px; width: 264px; left: 23px;">
						</div>
						<div class="jcrop-shade l" style="background-color: black; opacity: 0.5; width: 23px;">
						</div>
						<div class="jcrop-shade r" style="background-color: black; opacity: 0.5; width: 55px;">

						</div>
						<div class="jcrop-shade b" style="background-color: black; opacity: 0.5; height: 31.92px; width: 264px; left: 23px;">

						</div>
					</div>
					<img src="https://d3o1694hluedf9.cloudfront.net/sierra-750.jpg">
				</div> 
				<ul class="coords">
					<li>X: <input type="text" readonly="readonly"></li>
					<li>Y: <input type="text" readonly="readonly"></li>
					<li>W: <input type="text" readonly="readonly"></li>
					<li>H: <input type="text" readonly="readonly"></li>
					<li><button>x2/y2</button></li></ul> <div><label><input type="checkbox"> <tt>multi:false</tt></label></div> <div style="margin-top: 0.8em;"><b>CSS Classes</b></div> <div><label><input type="checkbox"> <tt>.jcrop-ux-no-outline</tt> <small>(disable focused outline)</small></label></div> <div><label><input type="checkbox"> <tt>.jcrop-ux-fade-more</tt> <small>(inactive widgets less visible)</small></label></div> <div><label><input type="checkbox"> <tt>.jcrop-ux-inactive-handles</tt> <small>(show handles on inactive widgets)</small></label></div> <div><label><input type="checkbox"> <tt>.jcrop-ux-keep-current</tt> <small>(active widget retains full opacity)</small></label></div></div>
			<div class="row">
				<div class="col-xl-12">
					<div class="card">
						<div class="card-body">
							<div class="profile-tab">
								<div class="custom-tab-1">
									<ul class="nav nav-tabs">
										{% for object in object_list %}
										<li class="nav-item"><a href="#gallery-{{forloop.counter}}" data-bs-toggle="tab" class="nav-link{% if forloop.counter == 1 %} active show{% endif %}">{{object.title}} {{forloop.counter}}</a>
										{% endfor %}
									</ul>
									<div class="tab-content">
										{% for object in object_list %}
										<div id="gallery-{{forloop.counter}}" class="tab-pane fade{% if forloop.counter == 1 %} active show{% endif %}">
											<div class="row">
												<div class="col-xl-8">
													<div class="">
														<img src="{{object.file.url}}" class="img-fluid mt-4 mb-4 w-100" id="image-{{forloop.counter}}">
													</div>
													<div id="btn">
														<input type='button' id="cropBtnID" 
																value='Crop Image'>
													</div>
													<div>
														<img src="#" id="outputImage" 
																style="display:none;">
													</div>
												</div>
												<div class="col-xl-4">
													<div class="basic-form">
														<form  method="post" id="coordinateform{{forloop.counter}}" action="/submit-coordinates/{{object.id}}/">
															{% csrf_token %}
															<div class="row">
																<div class="mb-3 col-md-12 ">
																	<label class="form-label">X Coordinate</label>
																	<input type="text" name="x_{{forloop.counter}}" value="{{forloop.counter}}" class="form-control" maxlength="30" readonly id="x-{{forloop.counter}}">
																</div>
																<div class="mb-3 col-md-12 ">
																	<label class="form-label">Y Coordinate</label>
																	<input type="text" name="y_{{forloop.counter}}" value="{{forloop.counter}}" class="form-control" maxlength="30" readonly id="y-{{forloop.counter}}">
																</div>
																<div class="mb-3 col-md-12 ">
																	<label class="form-label">X2 Coordinates</label>
																	<input type="text" name="x2_{{forloop.counter}}" value="{{forloop.counter}}" class="form-control" maxlength="30" readonly id="x2-{{forloop.counter}}">
																</div>
																<div class="mb-3 col-md-12 ">
																	<label class="form-label">Y2 Coordinates</label>
																	<input type="text" name="y2_{{forloop.counter}}" value="{{forloop.counter}}" class="form-control" maxlength="30" readonly id="y2-{{forloop.counter}}">
																</div>
															</div>
															<button type="submit" value="{{forloop.counter}}" class="btn btn-secondary mt-4 mb-5 submit-coordinates">Save selection</button>
														</form>
													</div>
												</div>
											</div>
										</div>
										{% endfor %}
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
        </div>
    </div>
    {% include 'base/partials/footer.html' %}
    {% include 'base/partials/messages.html' %}
    <!-- ================================
        END CONTENT BLOCKS
    ================================= -->
    </div>

    <!-- ================================
        START Base SCRIPTS
    ================================= -->
    {% block jcrop %}{% endblock %}
	<script src="{% static 'js/vendor/jquery-3.5.1.min.js' %}"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-jcrop/0.9.15/js/jquery.Jcrop.min.js" integrity="sha512-KKpgpD20ujD3yJ5gIJqfesYNuisuxguvTMcIrSnqGQP767QNHjEP+2s1WONIQ7j6zkdzGD4zgBHUwYmro5vMAw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="{% static 'js/vendor/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/vendor/bootstrap-select.min.js' %}"></script>
    <script src="{% static 'js/vendor/bootstrap.bundle.min.js' %}"></script>
    
    <script src="{% static 'js/vendor/jquery.magnific-popup.js' %}"></script>
    <script src="{% static 'js/vendor/metisMenu.min.js' %}"></script>
    <script src="{% static 'js/vendor/aos.min.js' %}"></script>
    <script src="{% static 'js/vendor/perfect-scrollbar.min.js' %}"></script>
    
    <script src="{% static 'js/custom.js' %}"></script>

    <script src="{% static 'js/settings.js' %}"></script>
    <script src="{% static 'js/deznav-init.js' %}"></script>
    
    <script src="{% static 'js/vendor/toastr.js' %}"></script>
    <script src="{% static 'js/alert.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>

		$(window).on('load', function () {
		
			const stage = Jcrop.attach('target',{
				/* Some settings for 
				basic configuration*/
				allowSelect: true,
				allowMove: true,
				allowResize: true,
				fixedSupport: true,
				aspectRatio: 1,
				aspectRatio: 1,
				onSelect: function (c) {
					size = { x: c.x, y: c.y, 
							w: c.w, h: c.h };
		
					$("#cropBtnID").css(
						"visibility", "visible");
				}//end onSelect
			});
			//$('#image-1').Jcrop({
			//	/* Some settings for 
			//	basic configuration*/
			//	allowSelect: true,
			//	allowMove: true,
			//	allowResize: true,
			//	fixedSupport: true,
			//	aspectRatio: 1,
			//	onSelect: function (c) {
			//		size = { x: c.x, y: c.y, 
			//				w: c.w, h: c.h };
		//
		//			$("#cropBtnID").css(
		//				"visibility", "visible");
		//		}//end onSelect
		//	});//end Jcrop method
		
			$("#cropBtnID").click(function () {
				var img = $("#image-1").attr('src');
				$("#outputImage").show();
					
				$("#outputImage").attr('src', 
					'image-features.php?x = ' +
					size.x + ' & y=' + size.y +
					' & w=' + size.w + '&h=' + 
					size.h + '&img=' + img);
			});
			
		})
		</script>
    <!-- ================================
        End Base scripts
    ================================= -->
</body>
</html>
